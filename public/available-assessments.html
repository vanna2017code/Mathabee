<!DOCTYPE html>
<html>
<head>
<title>Available Assessments</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>

<h2>Available Assessments</h2>
<ul id="list"></ul>

<script>
async function load() {
  const r = await fetch("/assessment/available", {
    headers: { Authorization: "Bearer " + localStorage.token }
  });
  const data = await r.json();

  list.innerHTML = data.map(a =>
    `<li>
      ${a.title} (Grade ${a.grade})
      <button onclick="start(${a.id})">Start</button>
     </li>`
  ).join("");
}

async function start(id) {
  const r = await fetch("/assessment/start-scheduled", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      Authorization: "Bearer " + localStorage.token
    },
    body: JSON.stringify({ scheduleId: id })
  });

  const data = await r.json();
  localStorage.currentAssessment = JSON.stringify(data);
  location.href = "assessment.html";
}

load();
</script>

</body>
</html>
